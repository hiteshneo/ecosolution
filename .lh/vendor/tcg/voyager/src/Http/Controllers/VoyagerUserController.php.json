{
    "sourceFile": "vendor/tcg/voyager/src/Http/Controllers/VoyagerUserController.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 43,
            "patches": [
                {
                    "date": 1629284320028,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1629284334047,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,8 +33,8 @@\n \n         return parent::update($request, $id);\n     }\n \n-    public function userMedia(Request $request){\n-\n+    public function userMedia(Request $request, $type){\n+        echo $type;\n     }\n }\n"
                },
                {
                    "date": 1629284340204,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,7 +34,7 @@\n         return parent::update($request, $id);\n     }\n \n     public function userMedia(Request $request, $type){\n-        echo $type;\n+        \n     }\n }\n"
                },
                {
                    "date": 1629287503151,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n \n use Illuminate\\Http\\Request;\n use Illuminate\\Support\\Facades\\Auth;\n use TCG\\Voyager\\Facades\\Voyager;\n+use TCG\\Voyager\\Models\\Post;\n \n class VoyagerUserController extends VoyagerBaseController\n {\n     public function profile(Request $request)\n"
                },
                {
                    "date": 1629288096949,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,8 +34,55 @@\n \n         return parent::update($request, $id);\n     }\n \n+    public function getUserList(Request $request) {\n+\n+        $userData = User::where('role_id', '3')->orderBy('id', 'DESC');\n+\n+        return Datatables::of($userData)\n+            ->addColumn('name', function ($data) {\n+                return $data->name;\n+            })->addColumn('email', function ($data) {\n+                return $data->email;\n+            })->addColumn('phone_number', function ($data) {\n+                return $data->phone_number;\n+            })->addColumn('emergency_phone_number', function ($data) {\n+                return $data->emergency_phone_number;\n+            })->addColumn('address', function ($data) {\n+                return $data->address;\n+            })->addColumn('orignal_password', function ($data) {\n+                return $data->orignal_password;\n+            })->addColumn('totalearning', function ($data) {\n+                $totalOrderDoneCount = Order::where(['delivery_man_id' => $data->id, 'status' => 'DL'])->count();\n+                $totalEarning = ($totalOrderDoneCount * Voyager::setting('site.order_incentive', ''));\n+                return $totalEarning != '' ? number_format($totalEarning,2) : 0;\n+            })->addColumn('totalearning', function ($data) {\n+                $currentWeekEarning = Order::where(['delivery_man_id' => $data->id, 'status' => 'DL'])->where('created_at', '>', \\Carbon\\Carbon::now()->startOfWeek())->where('created_at', '<', \\Carbon\\Carbon::now()->endOfWeek())->sum('bill_to_pay');\n+                return $currentWeekEarning > 0 ? number_format($currentWeekEarning,2) : 0;\n+            })->addColumn('action', function ($data) {\n+                $datanew = base64_encode(json_encode($data));\n+                $action = '';   \n+                $action .= '<a href=\"javascript:;\" title=\"Pay\" class=\"btn btn-sm btn-info pull-right edit\" id=\"payamount\" data-id=\"'.$data->id.'\"><i class=\"voyager-dollar\"></i></a>'; \n+\n+                $action .= '<a href=\"'.route('voyager.drivers.order-list', ['id' => $data->id]).'\" title=\"Order List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-list\"></i></a>';  \n+\n+                $action .= '<a href=\"javascript:;\" title=\"Delete\" class=\"btn btn-sm btn-danger pull-right delete\"><i class=\"voyager-trash\"></i></a>';  \n+\n+                $action .= '<a href=\"'.route('voyager.drivers.view', ['id' => $data->id]).'\" title=\"View\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-eye\"></i></a>'; \n+\n+                $action .= '<a href=\"'.route('voyager.drivers.edits', ['id' => $data->id]).'\" title=\"Edit\" class=\"btn btn-sm btn-warning pull-right edit\"><i class=\"voyager-edit\"></i></a>'; \n+\n+                $action .= '<a href=\"javascript:;\" title=\"Active\" class=\"btn btn-sm btn-success pull-right active\" data-type=\"A\"><i class=\"voyager-check\"></i></a>';   \n+\n+                return $action ;\n+               \n+            })\n+            ->blacklist(['action'])\n+            ->make(true);\n+        //return ($data);      \n+    }\n+    \n     public function userMedia(Request $request, $type){\n         \n     }\n }\n"
                },
                {
                    "date": 1629293432403,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,9 @@\n     }\n \n     public function getUserList(Request $request) {\n \n-        $userData = User::where('role_id', '3')->orderBy('id', 'DESC');\n+        $userData = User::where('role_id', '2')->orderBy('id', 'DESC');\n \n         return Datatables::of($userData)\n             ->addColumn('name', function ($data) {\n                 return $data->name;\n@@ -80,9 +80,9 @@\n             ->blacklist(['action'])\n             ->make(true);\n         //return ($data);      \n     }\n-    \n+\n     public function userMedia(Request $request, $type){\n         \n     }\n }\n"
                },
                {
                    "date": 1629293468731,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -39,10 +39,12 @@\n \n         $userData = User::where('role_id', '2')->orderBy('id', 'DESC');\n \n         return Datatables::of($userData)\n-            ->addColumn('name', function ($data) {\n+            ->addColumn('user_name', function ($data) {\n                 return $data->name;\n+            })->addColumn('name', function ($data) {\n+                return $data->name;\n             })->addColumn('email', function ($data) {\n                 return $data->email;\n             })->addColumn('phone_number', function ($data) {\n                 return $data->phone_number;\n"
                },
                {
                    "date": 1629293527340,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -45,10 +45,10 @@\n             })->addColumn('name', function ($data) {\n                 return $data->name;\n             })->addColumn('email', function ($data) {\n                 return $data->email;\n-            })->addColumn('phone_number', function ($data) {\n-                return $data->phone_number;\n+            })->addColumn('mobile_number', function ($data) {\n+                return $data->mobile_number;\n             })->addColumn('emergency_phone_number', function ($data) {\n                 return $data->emergency_phone_number;\n             })->addColumn('address', function ($data) {\n                 return $data->address;\n"
                },
                {
                    "date": 1629293556650,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -47,12 +47,12 @@\n             })->addColumn('email', function ($data) {\n                 return $data->email;\n             })->addColumn('mobile_number', function ($data) {\n                 return $data->mobile_number;\n-            })->addColumn('emergency_phone_number', function ($data) {\n-                return $data->emergency_phone_number;\n-            })->addColumn('address', function ($data) {\n-                return $data->address;\n+            })->addColumn('gender', function ($data) {\n+                return $data->gender;\n+            })->addColumn('avatar', function ($data) {\n+                return $data->avatar;\n             })->addColumn('orignal_password', function ($data) {\n                 return $data->orignal_password;\n             })->addColumn('totalearning', function ($data) {\n                 $totalOrderDoneCount = Order::where(['delivery_man_id' => $data->id, 'status' => 'DL'])->count();\n"
                },
                {
                    "date": 1629293608394,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -51,17 +51,10 @@\n             })->addColumn('gender', function ($data) {\n                 return $data->gender;\n             })->addColumn('avatar', function ($data) {\n                 return $data->avatar;\n-            })->addColumn('orignal_password', function ($data) {\n-                return $data->orignal_password;\n-            })->addColumn('totalearning', function ($data) {\n-                $totalOrderDoneCount = Order::where(['delivery_man_id' => $data->id, 'status' => 'DL'])->count();\n-                $totalEarning = ($totalOrderDoneCount * Voyager::setting('site.order_incentive', ''));\n-                return $totalEarning != '' ? number_format($totalEarning,2) : 0;\n-            })->addColumn('totalearning', function ($data) {\n-                $currentWeekEarning = Order::where(['delivery_man_id' => $data->id, 'status' => 'DL'])->where('created_at', '>', \\Carbon\\Carbon::now()->startOfWeek())->where('created_at', '<', \\Carbon\\Carbon::now()->endOfWeek())->sum('bill_to_pay');\n-                return $currentWeekEarning > 0 ? number_format($currentWeekEarning,2) : 0;\n+            })->addColumn('created_at', function ($data) {\n+                return $data->created_at;\n             })->addColumn('action', function ($data) {\n                 $datanew = base64_encode(json_encode($data));\n                 $action = '';   \n                 $action .= '<a href=\"javascript:;\" title=\"Pay\" class=\"btn btn-sm btn-info pull-right edit\" id=\"payamount\" data-id=\"'.$data->id.'\"><i class=\"voyager-dollar\"></i></a>'; \n"
                },
                {
                    "date": 1629296833617,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n \n use Illuminate\\Http\\Request;\n use Illuminate\\Support\\Facades\\Auth;\n use TCG\\Voyager\\Facades\\Voyager;\n-use TCG\\Voyager\\Models\\Post;\n+use App\\Post;\n \n class VoyagerUserController extends VoyagerBaseController\n {\n     public function profile(Request $request)\n"
                },
                {
                    "date": 1629296868710,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,10 @@\n \n use Illuminate\\Http\\Request;\n use Illuminate\\Support\\Facades\\Auth;\n use TCG\\Voyager\\Facades\\Voyager;\n-use App\\Post;\n+use App\\User;\n+use Yajra\\DataTables\\Facades\\DataTables;\n \n class VoyagerUserController extends VoyagerBaseController\n {\n     public function profile(Request $request)\n"
                },
                {
                    "date": 1629296895205,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,15 +59,15 @@\n                 $datanew = base64_encode(json_encode($data));\n                 $action = '';   \n                 $action .= '<a href=\"javascript:;\" title=\"Pay\" class=\"btn btn-sm btn-info pull-right edit\" id=\"payamount\" data-id=\"'.$data->id.'\"><i class=\"voyager-dollar\"></i></a>'; \n \n-                $action .= '<a href=\"'.route('voyager.drivers.order-list', ['id' => $data->id]).'\" title=\"Order List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-list\"></i></a>';  \n+                $action .= '<a href=\"\" title=\"Order List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-list\"></i></a>';  \n \n                 $action .= '<a href=\"javascript:;\" title=\"Delete\" class=\"btn btn-sm btn-danger pull-right delete\"><i class=\"voyager-trash\"></i></a>';  \n \n-                $action .= '<a href=\"'.route('voyager.drivers.view', ['id' => $data->id]).'\" title=\"View\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-eye\"></i></a>'; \n+                $action .= '<a href=\"\" title=\"View\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-eye\"></i></a>'; \n \n-                $action .= '<a href=\"'.route('voyager.drivers.edits', ['id' => $data->id]).'\" title=\"Edit\" class=\"btn btn-sm btn-warning pull-right edit\"><i class=\"voyager-edit\"></i></a>'; \n+                $action .= '<a href=\"\" title=\"Edit\" class=\"btn btn-sm btn-warning pull-right edit\"><i class=\"voyager-edit\"></i></a>'; \n \n                 $action .= '<a href=\"javascript:;\" title=\"Active\" class=\"btn btn-sm btn-success pull-right active\" data-type=\"A\"><i class=\"voyager-check\"></i></a>';   \n \n                 return $action ;\n"
                },
                {
                    "date": 1629296911175,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -41,9 +41,9 @@\n         $userData = User::where('role_id', '2')->orderBy('id', 'DESC');\n \n         return Datatables::of($userData)\n             ->addColumn('user_name', function ($data) {\n-                return $data->name;\n+                return $data->user_name;\n             })->addColumn('name', function ($data) {\n                 return $data->name;\n             })->addColumn('email', function ($data) {\n                 return $data->email;\n"
                },
                {
                    "date": 1629297194129,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n                 return $data->created_at;\n             })->addColumn('action', function ($data) {\n                 $datanew = base64_encode(json_encode($data));\n                 $action = '';   \n-                $action .= '<a href=\"javascript:;\" title=\"Pay\" class=\"btn btn-sm btn-info pull-right edit\" id=\"payamount\" data-id=\"'.$data->id.'\"><i class=\"voyager-dollar\"></i></a>'; \n+                $action .= '<a href=\"javascript:;\" title=\"Wall View\" class=\"btn btn-sm btn-info pull-right edit\" id=\"payamount\" data-id=\"'.$data->id.'\"><i class=\"voyager-images\"></i></a>'; \n \n                 $action .= '<a href=\"\" title=\"Order List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-list\"></i></a>';  \n \n                 $action .= '<a href=\"javascript:;\" title=\"Delete\" class=\"btn btn-sm btn-danger pull-right delete\"><i class=\"voyager-trash\"></i></a>';  \n"
                },
                {
                    "date": 1629297209445,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n                 return $data->created_at;\n             })->addColumn('action', function ($data) {\n                 $datanew = base64_encode(json_encode($data));\n                 $action = '';   \n-                $action .= '<a href=\"javascript:;\" title=\"Wall View\" class=\"btn btn-sm btn-info pull-right edit\" id=\"payamount\" data-id=\"'.$data->id.'\"><i class=\"voyager-images\"></i></a>'; \n+                $action .= '<a href=\"javascript:;\" title=\"Wall View\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-images\"></i></a>'; \n \n                 $action .= '<a href=\"\" title=\"Order List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-list\"></i></a>';  \n \n                 $action .= '<a href=\"javascript:;\" title=\"Delete\" class=\"btn btn-sm btn-danger pull-right delete\"><i class=\"voyager-trash\"></i></a>';  \n"
                },
                {
                    "date": 1629297232094,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,11 +57,11 @@\n                 return $data->created_at;\n             })->addColumn('action', function ($data) {\n                 $datanew = base64_encode(json_encode($data));\n                 $action = '';   \n-                $action .= '<a href=\"javascript:;\" title=\"Wall View\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-images\"></i></a>'; \n+                $action .= '<a href=\"javascript:;\" title=\"Wall List\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-images\"></i></a>'; \n \n-                $action .= '<a href=\"\" title=\"Order List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-list\"></i></a>';  \n+                $action .= '<a href=\"\" title=\"Reel List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-video\"></i></a>';  \n \n                 $action .= '<a href=\"javascript:;\" title=\"Delete\" class=\"btn btn-sm btn-danger pull-right delete\"><i class=\"voyager-trash\"></i></a>';  \n \n                 $action .= '<a href=\"\" title=\"View\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-eye\"></i></a>'; \n"
                },
                {
                    "date": 1629297333063,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n                 return $data->created_at;\n             })->addColumn('action', function ($data) {\n                 $datanew = base64_encode(json_encode($data));\n                 $action = '';   \n-                $action .= '<a href=\"javascript:;\" title=\"Wall List\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-images\"></i></a>'; \n+                $action .= '<a href=\"{{ route(\"voyager.user.media\", [\"type\" => \"wall\", \"id\" => '.$data->id.']) }}\" title=\"Wall List\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-images\"></i></a>'; \n \n                 $action .= '<a href=\"\" title=\"Reel List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-video\"></i></a>';  \n \n                 $action .= '<a href=\"javascript:;\" title=\"Delete\" class=\"btn btn-sm btn-danger pull-right delete\"><i class=\"voyager-trash\"></i></a>';  \n"
                },
                {
                    "date": 1629297412979,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -57,9 +57,9 @@\n                 return $data->created_at;\n             })->addColumn('action', function ($data) {\n                 $datanew = base64_encode(json_encode($data));\n                 $action = '';   \n-                $action .= '<a href=\"{{ route(\"voyager.user.media\", [\"type\" => \"wall\", \"id\" => '.$data->id.']) }}\" title=\"Wall List\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-images\"></i></a>'; \n+                $action .= '<a href=\"'.route('voyager.user.media', ['type' => 'wall', 'id' => $data->id]).'\" title=\"Wall List\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-images\"></i></a>'; \n \n                 $action .= '<a href=\"\" title=\"Reel List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-video\"></i></a>';  \n \n                 $action .= '<a href=\"javascript:;\" title=\"Delete\" class=\"btn btn-sm btn-danger pull-right delete\"><i class=\"voyager-trash\"></i></a>';  \n"
                },
                {
                    "date": 1629297433344,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,9 +59,9 @@\n                 $datanew = base64_encode(json_encode($data));\n                 $action = '';   \n                 $action .= '<a href=\"'.route('voyager.user.media', ['type' => 'wall', 'id' => $data->id]).'\" title=\"Wall List\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-images\"></i></a>'; \n \n-                $action .= '<a href=\"\" title=\"Reel List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-video\"></i></a>';  \n+                $action .= '<a href=\"'.route('voyager.user.media', ['type' => 'reel', 'id' => $data->id]).'\" title=\"Reel List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-video\"></i></a>';  \n \n                 $action .= '<a href=\"javascript:;\" title=\"Delete\" class=\"btn btn-sm btn-danger pull-right delete\"><i class=\"voyager-trash\"></i></a>';  \n \n                 $action .= '<a href=\"\" title=\"View\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-eye\"></i></a>'; \n"
                },
                {
                    "date": 1629297465840,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -77,8 +77,8 @@\n             ->make(true);\n         //return ($data);      \n     }\n \n-    public function userMedia(Request $request, $type){\n+    public function userMedia(Request $request, $type, $id){\n         \n     }\n }\n"
                },
                {
                    "date": 1629297478638,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,9 @@\n use Illuminate\\Support\\Facades\\Auth;\n use TCG\\Voyager\\Facades\\Voyager;\n use App\\User;\n use Yajra\\DataTables\\Facades\\DataTables;\n+use TCG\\Voyager\\Models\\Post;\n \n class VoyagerUserController extends VoyagerBaseController\n {\n     public function profile(Request $request)\n"
                },
                {
                    "date": 1629297786292,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,7 +79,7 @@\n         //return ($data);      \n     }\n \n     public function userMedia(Request $request, $type, $id){\n-        \n+        $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL'])->get();\n     }\n }\n"
                },
                {
                    "date": 1629298075737,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,7 +79,12 @@\n         //return ($data);      \n     }\n \n     public function userMedia(Request $request, $type, $id){\n-        $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL'])->get();\n+\n+        if (request()->ajax()) {\n+            $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL'])->get();\n+        }\n+        $view = \"voyager::users.user-media\";\n+        return Voyager::view($view, compact('driverId', 'dataType', 'isServerSide'));\n     }\n }\n"
                },
                {
                    "date": 1629298102039,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,11 +80,17 @@\n     }\n \n     public function userMedia(Request $request, $type, $id){\n \n+        $slug = 'users';\n+\n+        // GET THE DataType based on the slug\n+        $dataType = Voyager::model('DataType')->where('slug', '=', $slug)->first();\n+        $isServerSide = isset($dataType->server_side) && $dataType->server_side;\n+\n         if (request()->ajax()) {\n             $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL'])->get();\n         }\n         $view = \"voyager::users.user-media\";\n-        return Voyager::view($view, compact('driverId', 'dataType', 'isServerSide'));\n+        return Voyager::view($view, compact('type', 'id'));\n     }\n }\n"
                },
                {
                    "date": 1629298117313,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,7 +90,7 @@\n         if (request()->ajax()) {\n             $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL'])->get();\n         }\n         $view = \"voyager::users.user-media\";\n-        return Voyager::view($view, compact('type', 'id'));\n+        return Voyager::view($view, compact('type', 'id', 'dataType', 'isServerSide'));\n     }\n }\n"
                },
                {
                    "date": 1629298314341,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,8 +87,10 @@\n         $dataType = Voyager::model('DataType')->where('slug', '=', $slug)->first();\n         $isServerSide = isset($dataType->server_side) && $dataType->server_side;\n \n         if (request()->ajax()) {\n+            $type = $request->get('type');\n+            $id = $request->get('id');\n             $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL'])->get();\n         }\n         $view = \"voyager::users.user-media\";\n         return Voyager::view($view, compact('type', 'id', 'dataType', 'isServerSide'));\n"
                },
                {
                    "date": 1629298429806,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -85,12 +85,14 @@\n \n         // GET THE DataType based on the slug\n         $dataType = Voyager::model('DataType')->where('slug', '=', $slug)->first();\n         $isServerSide = isset($dataType->server_side) && $dataType->server_side;\n-\n+        \n+        $type = $request->get('type');\n+        $id = $request->get('id');\n+        \n         if (request()->ajax()) {\n-            $type = $request->get('type');\n-            $id = $request->get('id');\n+            \n             $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL'])->get();\n         }\n         $view = \"voyager::users.user-media\";\n         return Voyager::view($view, compact('type', 'id', 'dataType', 'isServerSide'));\n"
                },
                {
                    "date": 1629298454875,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,9 +78,9 @@\n             ->make(true);\n         //return ($data);      \n     }\n \n-    public function userMedia(Request $request, $type, $id){\n+    public function userMedia(Request $request){\n \n         $slug = 'users';\n \n         // GET THE DataType based on the slug\n@@ -90,9 +90,10 @@\n         $type = $request->get('type');\n         $id = $request->get('id');\n         \n         if (request()->ajax()) {\n-            \n+            $type = $request->get('type');\n+        $id = $request->get('id');\n             $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL'])->get();\n         }\n         $view = \"voyager::users.user-media\";\n         return Voyager::view($view, compact('type', 'id', 'dataType', 'isServerSide'));\n"
                },
                {
                    "date": 1629298486282,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -91,10 +91,46 @@\n         $id = $request->get('id');\n         \n         if (request()->ajax()) {\n             $type = $request->get('type');\n-        $id = $request->get('id');\n+            $id = $request->get('id');\n             $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL'])->get();\n+            \n+            return Datatables::of($userData)\n+            ->addColumn('user_name', function ($data) {\n+                return $data->user_name;\n+            })->addColumn('name', function ($data) {\n+                return $data->name;\n+            })->addColumn('email', function ($data) {\n+                return $data->email;\n+            })->addColumn('mobile_number', function ($data) {\n+                return $data->mobile_number;\n+            })->addColumn('gender', function ($data) {\n+                return $data->gender;\n+            })->addColumn('avatar', function ($data) {\n+                return $data->avatar;\n+            })->addColumn('created_at', function ($data) {\n+                return $data->created_at;\n+            })->addColumn('action', function ($data) {\n+                $datanew = base64_encode(json_encode($data));\n+                $action = '';   \n+                $action .= '<a href=\"'.route('voyager.user.media', ['type' => 'wall', 'id' => $data->id]).'\" title=\"Wall List\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-images\"></i></a>'; \n+\n+                $action .= '<a href=\"'.route('voyager.user.media', ['type' => 'reel', 'id' => $data->id]).'\" title=\"Reel List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-video\"></i></a>';  \n+\n+                $action .= '<a href=\"javascript:;\" title=\"Delete\" class=\"btn btn-sm btn-danger pull-right delete\"><i class=\"voyager-trash\"></i></a>';  \n+\n+                $action .= '<a href=\"\" title=\"View\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-eye\"></i></a>'; \n+\n+                $action .= '<a href=\"\" title=\"Edit\" class=\"btn btn-sm btn-warning pull-right edit\"><i class=\"voyager-edit\"></i></a>'; \n+\n+                $action .= '<a href=\"javascript:;\" title=\"Active\" class=\"btn btn-sm btn-success pull-right active\" data-type=\"A\"><i class=\"voyager-check\"></i></a>';   \n+\n+                return $action ;\n+               \n+            })\n+            ->blacklist(['action'])\n+            ->make(true);\n         }\n         $view = \"voyager::users.user-media\";\n         return Voyager::view($view, compact('type', 'id', 'dataType', 'isServerSide'));\n     }\n"
                },
                {
                    "date": 1629298536454,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -93,24 +93,18 @@\n         if (request()->ajax()) {\n             $type = $request->get('type');\n             $id = $request->get('id');\n             $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL'])->get();\n-            \n+\n             return Datatables::of($userData)\n-            ->addColumn('user_name', function ($data) {\n-                return $data->user_name;\n-            })->addColumn('name', function ($data) {\n-                return $data->name;\n-            })->addColumn('email', function ($data) {\n-                return $data->email;\n-            })->addColumn('mobile_number', function ($data) {\n-                return $data->mobile_number;\n-            })->addColumn('gender', function ($data) {\n-                return $data->gender;\n-            })->addColumn('avatar', function ($data) {\n-                return $data->avatar;\n-            })->addColumn('created_at', function ($data) {\n-                return $data->created_at;\n+            ->addColumn('title', function ($data) {\n+                return $data->title;\n+            })->addColumn('body', function ($data) {\n+                return $data->body;\n+            })->addColumn('audio_name', function ($data) {\n+                return $data->audio_name;\n+            })->addColumn('image', function ($data) {\n+                return $data->image;\n             })->addColumn('action', function ($data) {\n                 $datanew = base64_encode(json_encode($data));\n                 $action = '';   \n                 $action .= '<a href=\"'.route('voyager.user.media', ['type' => 'wall', 'id' => $data->id]).'\" title=\"Wall List\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-images\"></i></a>'; \n"
                },
                {
                    "date": 1629298551600,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -106,20 +106,9 @@\n                 return $data->image;\n             })->addColumn('action', function ($data) {\n                 $datanew = base64_encode(json_encode($data));\n                 $action = '';   \n-                $action .= '<a href=\"'.route('voyager.user.media', ['type' => 'wall', 'id' => $data->id]).'\" title=\"Wall List\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-images\"></i></a>'; \n-\n-                $action .= '<a href=\"'.route('voyager.user.media', ['type' => 'reel', 'id' => $data->id]).'\" title=\"Reel List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-video\"></i></a>';  \n-\n                 $action .= '<a href=\"javascript:;\" title=\"Delete\" class=\"btn btn-sm btn-danger pull-right delete\"><i class=\"voyager-trash\"></i></a>';  \n-\n-                $action .= '<a href=\"\" title=\"View\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-eye\"></i></a>'; \n-\n-                $action .= '<a href=\"\" title=\"Edit\" class=\"btn btn-sm btn-warning pull-right edit\"><i class=\"voyager-edit\"></i></a>'; \n-\n-                $action .= '<a href=\"javascript:;\" title=\"Active\" class=\"btn btn-sm btn-success pull-right active\" data-type=\"A\"><i class=\"voyager-check\"></i></a>';   \n-\n                 return $action ;\n                \n             })\n             ->blacklist(['action'])\n"
                },
                {
                    "date": 1629298607083,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -94,9 +94,9 @@\n             $type = $request->get('type');\n             $id = $request->get('id');\n             $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL'])->get();\n \n-            return Datatables::of($userData)\n+            return Datatables::of($postData)\n             ->addColumn('title', function ($data) {\n                 return $data->title;\n             })->addColumn('body', function ($data) {\n                 return $data->body;\n"
                },
                {
                    "date": 1629298615876,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -92,9 +92,9 @@\n         \n         if (request()->ajax()) {\n             $type = $request->get('type');\n             $id = $request->get('id');\n-            $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL'])->get();\n+            $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL']);\n \n             return Datatables::of($postData)\n             ->addColumn('title', function ($data) {\n                 return $data->title;\n"
                },
                {
                    "date": 1629298989230,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,9 +98,9 @@\n             return Datatables::of($postData)\n             ->addColumn('title', function ($data) {\n                 return $data->title;\n             })->addColumn('body', function ($data) {\n-                return $data->body;\n+                return strip_tag($data->body);\n             })->addColumn('audio_name', function ($data) {\n                 return $data->audio_name;\n             })->addColumn('image', function ($data) {\n                 return $data->image;\n"
                },
                {
                    "date": 1629298994950,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -98,9 +98,9 @@\n             return Datatables::of($postData)\n             ->addColumn('title', function ($data) {\n                 return $data->title;\n             })->addColumn('body', function ($data) {\n-                return strip_tag($data->body);\n+                return strip_tags($data->body);\n             })->addColumn('audio_name', function ($data) {\n                 return $data->audio_name;\n             })->addColumn('image', function ($data) {\n                 return $data->image;\n"
                },
                {
                    "date": 1629306974670,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,9 @@\n         $isServerSide = isset($dataType->server_side) && $dataType->server_side;\n         \n         $type = $request->get('type');\n         $id = $request->get('id');\n-        \n+        $type = $type == 'wall' ? 'WALL' ? 'REEL';\n         if (request()->ajax()) {\n             $type = $request->get('type');\n             $id = $request->get('id');\n             $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL']);\n"
                },
                {
                    "date": 1629306984006,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,13 +88,13 @@\n         $isServerSide = isset($dataType->server_side) && $dataType->server_side;\n         \n         $type = $request->get('type');\n         $id = $request->get('id');\n-        $type = $type == 'wall' ? 'WALL' ? 'REEL';\n+        $type = $type == 'wall' ? 'WALL' : 'REEL';\n         if (request()->ajax()) {\n             $type = $request->get('type');\n             $id = $request->get('id');\n-            $postData = Post::where(['author_id' => $id, 'post_type' => 'WALL']);\n+            $postData = Post::where(['author_id' => $id, 'post_type' => $type]);\n \n             return Datatables::of($postData)\n             ->addColumn('title', function ($data) {\n                 return $data->title;\n"
                },
                {
                    "date": 1629307009640,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,12 +88,13 @@\n         $isServerSide = isset($dataType->server_side) && $dataType->server_side;\n         \n         $type = $request->get('type');\n         $id = $request->get('id');\n-        $type = $type == 'wall' ? 'WALL' : 'REEL';\n+        \n         if (request()->ajax()) {\n             $type = $request->get('type');\n             $id = $request->get('id');\n+            $type = $type == 'wall' ? 'WALL' : 'REEL';\n             $postData = Post::where(['author_id' => $id, 'post_type' => $type]);\n \n             return Datatables::of($postData)\n             ->addColumn('title', function ($data) {\n"
                },
                {
                    "date": 1629307018861,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -115,7 +115,7 @@\n             ->blacklist(['action'])\n             ->make(true);\n         }\n         $view = \"voyager::users.user-media\";\n-        return Voyager::view($view, compact('type', 'id', 'dataType', 'isServerSide'));\n+        return Voyager::view($view, compact('type', 'id', 'dataType', 'isServerSide', 'type'));\n     }\n }\n"
                },
                {
                    "date": 1629480853687,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,9 +64,9 @@\n                 $action .= '<a href=\"'.route('voyager.user.media', ['type' => 'reel', 'id' => $data->id]).'\" title=\"Reel List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-video\"></i></a>';  \n \n                 $action .= '<a href=\"javascript:;\" title=\"Delete\" class=\"btn btn-sm btn-danger pull-right delete\"><i class=\"voyager-trash\"></i></a>';  \n \n-                $action .= '<a href=\"\" title=\"View\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-eye\"></i></a>'; \n+                $action .= '<a href=\"'.route('voyager.user.view', ['type' => 'wall', 'id' => $data->id]).'\" title=\"View\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-eye\"></i></a>'; \n \n                 $action .= '<a href=\"\" title=\"Edit\" class=\"btn btn-sm btn-warning pull-right edit\"><i class=\"voyager-edit\"></i></a>'; \n \n                 $action .= '<a href=\"javascript:;\" title=\"Active\" class=\"btn btn-sm btn-success pull-right active\" data-type=\"A\"><i class=\"voyager-check\"></i></a>';   \n"
                },
                {
                    "date": 1629480863302,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,9 +64,9 @@\n                 $action .= '<a href=\"'.route('voyager.user.media', ['type' => 'reel', 'id' => $data->id]).'\" title=\"Reel List\" class=\"btn btn-sm btn-success pull-right edit\"><i class=\"voyager-video\"></i></a>';  \n \n                 $action .= '<a href=\"javascript:;\" title=\"Delete\" class=\"btn btn-sm btn-danger pull-right delete\"><i class=\"voyager-trash\"></i></a>';  \n \n-                $action .= '<a href=\"'.route('voyager.user.view', ['type' => 'wall', 'id' => $data->id]).'\" title=\"View\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-eye\"></i></a>'; \n+                $action .= '<a href=\"'.route('voyager.user.view', ['id' => $data->id]).'\" title=\"View\" class=\"btn btn-sm btn-info pull-right edit\"><i class=\"voyager-eye\"></i></a>'; \n \n                 $action .= '<a href=\"\" title=\"Edit\" class=\"btn btn-sm btn-warning pull-right edit\"><i class=\"voyager-edit\"></i></a>'; \n \n                 $action .= '<a href=\"javascript:;\" title=\"Active\" class=\"btn btn-sm btn-success pull-right active\" data-type=\"A\"><i class=\"voyager-check\"></i></a>';   \n"
                },
                {
                    "date": 1629480962923,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,8 +36,72 @@\n \n         return parent::update($request, $id);\n     }\n \n+    //***************************************\n+    //                _____\n+    //               |  __ \\\n+    //               | |__) |\n+    //               |  _  /\n+    //               | | \\ \\\n+    //               |_|  \\_\\\n+    //\n+    //  Read an item of our Data Type B(R)EAD\n+    //\n+    //****************************************\n+\n+    public function show(Request $request, $id)\n+    {\n+        $slug = $this->getSlug($request);\n+\n+        $dataType = Voyager::model('DataType')->where('slug', '=', $slug)->first();\n+\n+        $isSoftDeleted = false;\n+\n+        if (strlen($dataType->model_name) != 0) {\n+            $model = app($dataType->model_name);\n+            $query = $model->query();\n+\n+            // Use withTrashed() if model uses SoftDeletes and if toggle is selected\n+            if ($model && in_array(SoftDeletes::class, class_uses_recursive($model))) {\n+                $query = $query->withTrashed();\n+            }\n+            if ($dataType->scope && $dataType->scope != '' && method_exists($model, 'scope'.ucfirst($dataType->scope))) {\n+                $query = $query->{$dataType->scope}();\n+            }\n+            $dataTypeContent = call_user_func([$query, 'findOrFail'], $id);\n+            if ($dataTypeContent->deleted_at) {\n+                $isSoftDeleted = true;\n+            }\n+        } else {\n+            // If Model doest exist, get data from table name\n+            $dataTypeContent = DB::table($dataType->name)->where('id', $id)->first();\n+        }\n+\n+        // Replace relationships' keys for labels and create READ links if a slug is provided.\n+        $dataTypeContent = $this->resolveRelations($dataTypeContent, $dataType, true);\n+\n+        // If a column has a relationship associated with it, we do not want to show that field\n+        $this->removeRelationshipField($dataType, 'read');\n+\n+        // Check permission\n+        $this->authorize('read', $dataTypeContent);\n+\n+        // Check if BREAD is Translatable\n+        $isModelTranslatable = is_bread_translatable($dataTypeContent);\n+\n+        // Eagerload Relations\n+        $this->eagerLoadRelations($dataTypeContent, $dataType, 'read', $isModelTranslatable);\n+\n+        $view = 'voyager::bread.read';\n+\n+        if (view()->exists(\"voyager::$slug.read\")) {\n+            $view = \"voyager::$slug.read\";\n+        }\n+\n+        return Voyager::view($view, compact('dataType', 'dataTypeContent', 'isModelTranslatable', 'isSoftDeleted'));\n+    }\n+    \n     public function getUserList(Request $request) {\n \n         $userData = User::where('role_id', '2')->orderBy('id', 'DESC');\n \n"
                },
                {
                    "date": 1629480977408,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -50,9 +50,9 @@\n     //****************************************\n \n     public function show(Request $request, $id)\n     {\n-        $slug = $this->getSlug($request);\n+        $slug = 'users';\n \n         $dataType = Voyager::model('DataType')->where('slug', '=', $slug)->first();\n \n         $isSoftDeleted = false;\n@@ -99,9 +99,9 @@\n         }\n \n         return Voyager::view($view, compact('dataType', 'dataTypeContent', 'isModelTranslatable', 'isSoftDeleted'));\n     }\n-    \n+\n     public function getUserList(Request $request) {\n \n         $userData = User::where('role_id', '2')->orderBy('id', 'DESC');\n \n"
                }
            ],
            "date": 1629284320028,
            "name": "Commit-0",
            "content": "<?php\n\nnamespace TCG\\Voyager\\Http\\Controllers;\n\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Auth;\nuse TCG\\Voyager\\Facades\\Voyager;\n\nclass VoyagerUserController extends VoyagerBaseController\n{\n    public function profile(Request $request)\n    {\n        $route = '';\n        $dataType = Voyager::model('DataType')->where('model_name', Auth::guard(app('VoyagerGuard'))->getProvider()->getModel())->first();\n        if (!$dataType && app('VoyagerGuard') == 'web') {\n            $route = route('voyager.users.edit', Auth::user()->getKey());\n        } elseif ($dataType) {\n            $route = route('voyager.'.$dataType->slug.'.edit', Auth::user()->getKey());\n        }\n\n        return Voyager::view('voyager::profile', compact('route'));\n    }\n\n    // POST BR(E)AD\n    public function update(Request $request, $id)\n    {\n        if (Auth::user()->getKey() == $id) {\n            $request->merge([\n                'role_id'                              => Auth::user()->role_id,\n                'user_belongstomany_role_relationship' => Auth::user()->roles->pluck('id')->toArray(),\n            ]);\n        }\n\n        return parent::update($request, $id);\n    }\n\n    public function userMedia(Request $request){\n\n    }\n}\n"
        }
    ]
}